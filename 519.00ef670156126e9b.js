"use strict";(self.webpackChunkReciBook=self.webpackChunkReciBook||[]).push([[519],{7519:(P,d,n)=>{n.r(d),n.d(d,{PerfilModule:()=>Z});var c=n(6895),l=n(9965),m=n(529),o=n(8256);let p=(()=>{class i{constructor(e){this.router=e}irAEscandallos(){this.router.navigate(["escandallos"])}irARecetas(){this.router.navigate(["recetas"])}irALocales(){this.router.navigate(["locales"])}irAHojaPedido(){this.router.navigate(["hoja"])}}return i.\u0275fac=function(e){return new(e||i)(o.Y36(l.F0))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-perfil"]],decls:42,vars:0,consts:[[1,"card","cardContainer","justify-content-center","mb-5"],[1,"title","ms-4","mt-5","text-center","mb-5"],["data-masonry",'{"percentPosition": true }',1,"row","justify-content-center","mb-5"],[1,"service","ms-5","col-sm-4","col-lg-4","mb-4",3,"click"],[1,"boton","card","text-center"],[1,"card-body"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-shop"],["d","M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z"],[1,"card-title","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-spreadsheet"],["d","M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V9H3V2a1 1 0 0 1 1-1h5.5v2zM3 12v-2h2v2H3zm0 1h2v2H4a1 1 0 0 1-1-1v-1zm3 2v-2h3v2H6zm4 0v-2h3v1a1 1 0 0 1-1 1h-2zm3-3h-3v-2h3v2zm-7 0v-2h3v2H6z"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-bar-graph"],["d","M10 13.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v6zm-2.5.5a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1zm-3 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-1z"],["d","M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-arrow-up"],["d","M8.5 11.5a.5.5 0 0 1-1 0V7.707L6.354 8.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 7.707V11.5z"],["routerLink","verPerfil",1,"service","ms-5","col-sm-4","col-lg-4","mb-4"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-person-fill"],["d","M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11z"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"h1",1),o._uU(2,"Mi Perfil"),o.qZA(),o.TgZ(3,"div",2)(4,"button",3),o.NdJ("click",function(){return r.irALocales()}),o.TgZ(5,"div",4)(6,"div",5),o.O4$(),o.TgZ(7,"svg",6),o._UZ(8,"path",7),o.qZA(),o.kcU(),o.TgZ(9,"h5",8),o._uU(10,"Mis Locales"),o.qZA()()()(),o.TgZ(11,"button",3),o.NdJ("click",function(){return r.irARecetas()}),o.TgZ(12,"div",4)(13,"div",5),o.O4$(),o.TgZ(14,"svg",9),o._UZ(15,"path",10),o.qZA(),o.kcU(),o.TgZ(16,"h5",8),o._uU(17,"Mis Recetas"),o.qZA()()()(),o.TgZ(18,"button",3),o.NdJ("click",function(){return r.irAEscandallos()}),o.TgZ(19,"div",4)(20,"div",5),o.O4$(),o.TgZ(21,"svg",11),o._UZ(22,"path",12)(23,"path",13),o.qZA(),o.kcU(),o.TgZ(24,"h5",8),o._uU(25,"Mis Escandallos"),o.qZA()()()(),o.TgZ(26,"button",3),o.NdJ("click",function(){return r.irAHojaPedido()}),o.TgZ(27,"div",4)(28,"div",5),o.O4$(),o.TgZ(29,"svg",14),o._UZ(30,"path",15)(31,"path",13),o.qZA(),o.kcU(),o.TgZ(32,"h5",8),o._uU(33,"Mis Hojas de Pedido"),o.qZA()()()(),o.TgZ(34,"button",16)(35,"div",4)(36,"div",5),o.O4$(),o.TgZ(37,"svg",17),o._UZ(38,"path",18),o.qZA(),o.kcU(),o.TgZ(39,"h5",8),o._uU(40,"Ver Perfil"),o.qZA()()()()()(),o._UZ(41,"router-outlet"))},dependencies:[l.lC,l.rH],styles:[".service[_ngcontent-%COMP%]{border:none;background-color:transparent}.boton[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.card[_ngcontent-%COMP%]{overflow-x:hidden}.cardContainer[_ngcontent-%COMP%]{border:none}"]}),i})();var u=n(4811);let f=(()=>{class i{constructor(e){this.sesion=e,this.usuario=this.sesion.usuario}}return i.\u0275fac=function(e){return new(e||i)(o.Y36(u.v))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-read-user"]],decls:22,vars:6,consts:[[1,"container"],[1,"row","m-5","no-gutters","shadow-lg"],[1,"col-md-6","d-none","d-md-block"],["src","assets/pexels-cottonbro-studio-4253312.jpg",1,"img-fluid",2,"min-height","100%","margin-left","-11px"],[1,"col-md-6","bg-white","p-5","cartaRegistro"],[1,"pb-3","mt-5"],[1,"pb-3"],[1,"pb-2"],["routerLink","../modificarPerfil",1,"btn","btn-warning","w-100","font-weight-bold","mt-2"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",4)(5,"h3",5),o._uU(6,"Mi Perfil"),o.qZA(),o.TgZ(7,"div",6),o._uU(8),o.qZA(),o.TgZ(9,"div",6),o._uU(10),o.qZA(),o.TgZ(11,"div",6),o._uU(12),o.qZA(),o.TgZ(13,"div",6),o._uU(14),o.qZA(),o.TgZ(15,"div",6),o._uU(16),o.qZA(),o.TgZ(17,"div",6),o._uU(18),o.qZA(),o.TgZ(19,"div",7)(20,"button",8),o._uU(21,"Modificar Perfil"),o.qZA()()()()()),2&e&&(o.xp6(8),o.hij(" Nombre: ",r.usuario.nombre," "),o.xp6(2),o.hij(" Apellidos: ",r.usuario.apellidos," "),o.xp6(2),o.hij(" DNI: ",r.usuario.dni," "),o.xp6(2),o.hij(" Correo electr\xf3nico: ",r.usuario.email," "),o.xp6(2),o.hij(" Tel\xe9fono: ",r.usuario.telefono," "),o.xp6(2),o.hij(" Fecha de creaci\xf3n de la cuenta: ",r.usuario.fechaCreacion," "))},dependencies:[l.rH]}),i})();var t=n(433),h=n(5763);const v=["botonPassword"],g=[{path:"",component:p,children:[{path:"verPerfil",component:f},{path:"modificarPerfil",component:(()=>{class i{constructor(e,r,a,w){this.service=e,this.sesion=r,this.fb=a,this.router=w,this.msgError="",this.usuario=this.sesion.usuario,this.errorPassword1="",this.errorPassword2="",this.formModificar=this.fb.group({dni:[this.usuario.dni,t.kI.required],nombre:[this.usuario.nombre,t.kI.required],apellidos:[this.usuario.apellidos,t.kI.required],email:[this.usuario.email,t.kI.required],telefono:[this.usuario.telefono]}),this.formPassword=this.fb.group({antiguaPassword:["",t.kI.required],nuevaPassword:["",t.kI.required],comprobarPassword:["",t.kI.required]})}modificar(){this.subscription=this.service.modificar({nombre:this.formModificar.controls.nombre.value,apellidos:this.formModificar.controls.apellidos.value,dni:this.formModificar.controls.dni.value,password:this.sesion.usuario?.password,email:this.formModificar.controls.email.value,telefono:this.formModificar.controls.telefono.value,fechaCreacion:this.sesion.usuario?.fechaCreacion}).subscribe(r=>{null==r?(console.log("entra en el if de null"),this.msgError="La solicitud no se ha podido realizar, int\xe9ntelo de nuevo",this.router.navigate(["modificarPerfil"])):(this.router.navigate(["verPerfil"]),this.sesion.usuario=r,console.log("entra en el else correcto"))})}checkPassword(){this.formPassword.controls.nuevaPassword.value!==this.formPassword.controls.comprobarPassword.value?(this.botonPassword.nativeElement.disabled=!0,this.errorPassword2="Las contrase\xf1as no coinciden"):this.errorPassword2=""}existsPassword(){this.subscription=this.service.inicioSesion(this.sesion.usuario?.email,this.formPassword.controls.antiguaPassword.value).subscribe(e=>{null==e?(this.errorPassword1="La contrase\xf1a que has introducido es err\xf3nea",this.botonPassword.nativeElement.disabled=!0):this.errorPassword1=""})}updatePassword(){const e={nombre:this.sesion.usuario?.nombre,apellidos:this.sesion.usuario?.apellidos,dni:this.sesion.usuario?.dni,password:this.formPassword.controls.nuevaPassword.value,email:this.sesion.usuario?.email,telefono:this.sesion.usuario?.telefono,fechaCreacion:this.sesion.usuario?.fechaCreacion};console.log(e),this.subscription=this.service.modificar(e).subscribe(r=>{null==r?(console.log("entra en el if de null"),this.msgError="La solicitud no se ha podido realizar, int\xe9ntelo de nuevo",this.router.navigate(["modificarPerfil"])):(console.log("entra en el else correcto"),this.router.navigate(["perfil"]),this.sesion.usuario=r)})}}return i.\u0275fac=function(e){return new(e||i)(o.Y36(h.i),o.Y36(u.v),o.Y36(t.qu),o.Y36(l.F0))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-update-user"]],viewQuery:function(e,r){if(1&e&&o.Gf(v,5),2&e){let a;o.iGM(a=o.CRH())&&(r.botonPassword=a.first)}},decls:61,vars:7,consts:[[1,"container"],[1,"row","m-5","no-gutters","shadow-lg"],[1,"col-md-6","d-md-block","mt-5"],[1,"pb-3","mt-5"],[1,"form-style","m"],["needs-validation","",3,"formGroup","ngSubmit"],[1,"form-group","pb-3"],["for","antiguaPassword"],["type","password","formControlName","antiguaPassword","name","antiguaPassword","id","antiguaPassword","required","",1,"form-control",3,"blur"],[1,"text-danger"],[1,"pb-3"],["for","nuevaPassword"],["type","password","formControlName","nuevaPassword","name","nuevaPassword","id","nuevaPassword","required","",1,"form-control"],["for","comprobarPassword"],["type","password","formControlName","comprobarPassword","name","comprobarPassword","id","comprobarPassword","required","",1,"form-control",3,"blur"],[1,"pb-2"],["type","submit",1,"btn","btn-dark","w-100","font-weight-bold","mt-2",3,"disabled"],["botonPassword",""],[1,"col-md-6","bg-white","p-5","cartaRegistro"],[1,"form-style"],["for","nombre"],["type","text","formControlName","nombre","name","nombre","id","nombre","required","",1,"form-control"],["for","apellidos"],["type","text","formControlName","apellidos","name","apellidos","id","apellidos","required","",1,"form-control"],["for","email"],["type","text","formControlName","email","name","email","readonly","","id","email","required","",1,"readonly","form-control"],["type","text","formControlName","dni","name","dni","readonly","","id","dni","required","",1,"readonly","form-control"],["type","text","formControlName","telefono","name","telefono","id","telefono","required","",1,"form-control"],[1,"text-small"]],template:function(e,r){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4,"Modificar mi contrase\xf1a"),o.qZA(),o.TgZ(5,"div",4)(6,"form",5),o.NdJ("ngSubmit",function(){return r.updatePassword()}),o.TgZ(7,"div",6)(8,"label",7),o._uU(9,"Contrase\xf1a actual: *"),o.qZA(),o.TgZ(10,"input",8),o.NdJ("blur",function(){return r.existsPassword()}),o.qZA(),o.TgZ(11,"div",9),o._uU(12),o.qZA()(),o.TgZ(13,"div",10)(14,"label",11),o._uU(15,"Nueva Contrase\xf1a: *"),o.qZA(),o._UZ(16,"input",12),o.qZA(),o.TgZ(17,"div",10)(18,"label",13),o._uU(19,"Repetir Contrase\xf1a:"),o.qZA(),o.TgZ(20,"input",14),o.NdJ("blur",function(){return r.checkPassword()}),o.qZA(),o.TgZ(21,"div",9),o._uU(22),o.qZA()(),o.TgZ(23,"div",15)(24,"button",16,17),o._uU(26,"Cambiar Contrase\xf1a"),o.qZA()()()()(),o.TgZ(27,"div",18)(28,"h3",3),o._uU(29,"Modificar mi perfil"),o.qZA(),o.TgZ(30,"div",19)(31,"div",10)(32,"form",5),o.NdJ("ngSubmit",function(){return r.modificar()}),o.TgZ(33,"div",6)(34,"label",20),o._uU(35,"Nombre: *"),o.qZA(),o._UZ(36,"input",21),o.qZA(),o.TgZ(37,"div",10)(38,"label",22),o._uU(39,"Apellidos: *"),o.qZA(),o._UZ(40,"input",23),o.qZA(),o.TgZ(41,"div",10)(42,"label",24),o._uU(43,"Correo electr\xf3nico:"),o.qZA(),o._UZ(44,"input",25),o.qZA(),o.TgZ(45,"div",10)(46,"label",20),o._uU(47,"DNI:"),o.qZA(),o._UZ(48,"input",26),o.qZA(),o.TgZ(49,"div",10)(50,"label",20),o._uU(51,"Tel\xe9fono:"),o.qZA(),o._UZ(52,"input",27),o.TgZ(53,"p",28),o._uU(54,'Los campos que contienen "*" son obligatorios'),o.qZA()(),o._UZ(55,"div",10),o.TgZ(56,"div",15)(57,"button",16),o._uU(58,"Modificar"),o.qZA(),o.TgZ(59,"div",9),o._uU(60),o.qZA()()()()()()()()),2&e&&(o.xp6(6),o.Q6J("formGroup",r.formPassword),o.xp6(6),o.hij(" ",r.errorPassword1," "),o.xp6(10),o.hij(" ",r.errorPassword2," "),o.xp6(2),o.Q6J("disabled",r.formPassword.invalid),o.xp6(8),o.Q6J("formGroup",r.formModificar),o.xp6(25),o.Q6J("disabled",r.formModificar.invalid),o.xp6(3),o.hij(" ",r.msgError," "))},dependencies:[t._Y,t.Fj,t.JJ,t.JL,t.Q7,t.sg,t.u],styles:[".readonly[_ngcontent-%COMP%]{background-color:#e6e6e6}"]}),i})()},{path:"**",redirectTo:""}]}];let b=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[l.Bz.forChild(g),l.Bz]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[t.UX,c.ez,m.JF,b,l.Bz]}),i})()}}]);